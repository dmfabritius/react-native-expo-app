import React, { useContext, useEffect } from 'react';
import { Text, View } from 'react-native';
import { collection, addDoc } from 'firebase/firestore';
import { StoreContext } from './src/components/StoreProvider';
import { Library, Branch } from './src/models';

export default function FirebaseLogin() {
  const { firestore } = useContext(StoreContext);

  const librariesCollection = collection(firestore, 'libraries');
  const branchesCollection = collection(firestore, 'branches');
  const weatherCollection = collection(firestore, 'historical_weather');

  const libraries: Partial<Library>[] = [
    {
      createdTimestampUtc: '2022-01-12T22:46:19.622Z',
      id: '',
      isEnabled: true,
      status: 'active',
      name: 'Seattle Public Library',
      notes: 'central library',
      address1: '1000 4th Avenue',
      city: 'Seattle',
      state: 'WA',
      zip: '98104',
      timezoneId: 5,
      latitude: 47.61,
      longitude: -122.33,
      branchesCount: 3,
      capacity: 78,
    },
    {
      createdTimestampUtc: '2022-01-14T22:46:19.622Z',
      id: '',
      isEnabled: true,
      status: 'active',
      name: 'San Francisco Public Library',
      notes: 'main library',
      address1: '100 Larkin Street',
      city: 'San Francisco',
      state: 'CA',
      zip: '94102',
      timezoneId: 5,
      latitude: 37.78,
      longitude: -122.42,
      branchesCount: 3,
      capacity: 83,
    },
    {
      id: '',
      isEnabled: true,
      status: 'stand-by',
      name: 'New York Public Library',
      notes: 'main library',
      address1: '476 5th Avenue',
      city: 'New York',
      state: 'NY',
      zip: '10018',
      timezoneId: 1,
      latitude: 40.75,
      longitude: -73.98,
      branchesCount: 3,
      createdTimestampUtc: '2022-01-02T22:46:19.622Z',
      capacity: 54,
    },
  ];

  const branches: Partial<Branch>[] = [
    {
      amperage: 5,
      connection: 'connected',
      isEnabled: true,
      isDraft: false,
      latitude: 40.81,
      longitude: -73.93,
      materialId: 3,
      name: '125th Street Library',
      libraryId: 'oU3Vn2kT3n0W7YL1AceW',
      resistance: 250,
      shapeId: 2,
      status: 'active',
      timezoneId: 1,
      voltage: 12,
      createdTimestampUtc: '2022-01-06T22:46:19.622Z',
    },
    {
      amperage: 7,
      connection: 'connected',
      isEnabled: true,
      isDraft: false,
      latitude: 40.76,
      longitude: -73.98,
      materialId: 2,
      name: '53rd Street Library',
      libraryId: 'oU3Vn2kT3n0W7YL1AceW',
      resistance: 250,
      shapeId: 1,
      status: 'active',
      timezoneId: 1,
      voltage: 12,
      createdTimestampUtc: '2022-01-03T22:46:19.622Z',
    },
    {
      amperage: 3,
      connection: 'not connected',
      isEnabled: true,
      id: '3',
      isDraft: true,
      latitude: 40.76,
      longitude: -73.97,
      materialId: 4,
      name: '58th Street Library',
      libraryId: 'oU3Vn2kT3n0W7YL1AceW',
      resistance: 250,
      shapeId: 1,
      status: 'active',
      timezoneId: 1,
      voltage: 12,
      createdTimestampUtc: '2022-01-07T22:46:19.622Z',
    },
    {
      amperage: 7,
      connection: 'connected',
      isEnabled: true,
      isDraft: false,
      latitude: 37.78,
      longitude: -122.49,
      materialId: 2,
      name: 'Anza Library Branch',
      libraryId: 'rqT0Jd0KXfotY8xLlQxF',
      resistance: 275,
      shapeId: 3,
      status: 'active',
      timezoneId: 5,
      voltage: 9,
      createdTimestampUtc: '2022-01-08T22:46:19.622Z',
    },
    {
      amperage: 7,
      connection: 'connected',
      isEnabled: true,
      isDraft: false,
      latitude: 37.73,
      longitude: -122.43,
      materialId: 2,
      name: 'Glen Park Library Branch',
      libraryId: 'rqT0Jd0KXfotY8xLlQxF',
      resistance: 325,
      shapeId: 2,
      status: 'active',
      timezoneId: 5,
      voltage: 6,
      createdTimestampUtc: '2022-01-07T22:46:19.622Z',
    },
    {
      amperage: 7,
      connection: 'connected',
      isEnabled: true,
      isDraft: false,
      latitude: 37.72,
      longitude: -122.46,
      materialId: 2,
      name: 'Ingleside Library Branch',
      libraryId: 'rqT0Jd0KXfotY8xLlQxF',
      resistance: 430,
      shapeId: 1,
      status: 'active',
      timezoneId: 5,
      voltage: 4,
      createdTimestampUtc: '2022-01-17T22:46:19.622Z',
    },
    {
      amperage: 11,
      connection: 'not connected',
      isEnabled: true,
      isDraft: true,
      latitude: 47.62,
      longitude: -122.32,
      materialId: 4,
      name: 'Capitol Hill Branch',
      libraryId: 'N7ohTjzEpM2yQBY6pOP2',
      resistance: 510,
      shapeId: 4,
      status: 'active',
      timezoneId: 5,
      voltage: 8,
      createdTimestampUtc: '2022-01-17T22:46:19.622Z',
    },
    {
      amperage: 4,
      connection: 'connected',
      isEnabled: true,
      isDraft: false,
      latitude: 47.55,
      longitude: -122.36,
      materialId: 2,
      name: 'Delridge Branch',
      libraryId: 'N7ohTjzEpM2yQBY6pOP2',
      resistance: 370,
      shapeId: 1,
      status: 'active',
      timezoneId: 5,
      voltage: 2,
      createdTimestampUtc: '2022-01-05T22:46:19.622Z',
    },
    {
      amperage: 8,
      connection: 'connected',
      isEnabled: true,
      isDraft: false,
      latitude: 47.55,
      longitude: -122.38,
      materialId: 5,
      name: 'High Point Branch',
      libraryId: 'N7ohTjzEpM2yQBY6pOP2',
      resistance: 370,
      shapeId: 2,
      status: 'active',
      timezoneId: 5,
      voltage: 10,
      createdTimestampUtc: '2022-01-06T22:46:19.622Z',
    },
  ];

  const weather = [
    { date: new Date('2021-12-01').toISOString(), precipitation: 0.7, min_temp: 37, max_temp: 45 },
    { date: new Date('2021-12-02').toISOString(), precipitation: 1.7, min_temp: 26, max_temp: 33 },
    { date: new Date('2021-12-03').toISOString(), precipitation: 1.5, min_temp: 31, max_temp: 40 },
    { date: new Date('2021-12-04').toISOString(), precipitation: 1.1, min_temp: 34, max_temp: 44 },
    { date: new Date('2021-12-05').toISOString(), precipitation: 0.1, min_temp: 35, max_temp: 44 },
    { date: new Date('2021-12-06').toISOString(), precipitation: 0.3, min_temp: 28, max_temp: 39 },
    { date: new Date('2021-12-07').toISOString(), precipitation: 0.9, min_temp: 30, max_temp: 40 },
    { date: new Date('2021-12-08').toISOString(), precipitation: 0.9, min_temp: 33, max_temp: 38 },
    { date: new Date('2021-12-09').toISOString(), precipitation: 1.4, min_temp: 32, max_temp: 42 },
    { date: new Date('2021-12-10').toISOString(), precipitation: 1.4, min_temp: 29, max_temp: 36 },
    { date: new Date('2021-12-11').toISOString(), precipitation: 0.6, min_temp: 36, max_temp: 43 },
    { date: new Date('2021-12-12').toISOString(), precipitation: 2, min_temp: 30, max_temp: 38 },
    { date: new Date('2021-12-13').toISOString(), precipitation: 0.6, min_temp: 37, max_temp: 45 },
    { date: new Date('2021-12-14').toISOString(), precipitation: 1.8, min_temp: 31, max_temp: 40 },
    { date: new Date('2021-12-15').toISOString(), precipitation: 0, min_temp: 34, max_temp: 45 },
    { date: new Date('2021-12-16').toISOString(), precipitation: 0, min_temp: 34, max_temp: 45 },
    { date: new Date('2021-12-17').toISOString(), precipitation: 1.2, min_temp: 34, max_temp: 41 },
    { date: new Date('2021-12-18').toISOString(), precipitation: 1.1, min_temp: 31, max_temp: 37 },
    { date: new Date('2021-12-19').toISOString(), precipitation: 2, min_temp: 26, max_temp: 31 },
    { date: new Date('2021-12-20').toISOString(), precipitation: 1.8, min_temp: 27, max_temp: 35 },
    { date: new Date('2021-12-21').toISOString(), precipitation: 1.9, min_temp: 31, max_temp: 38 },
    { date: new Date('2021-12-22').toISOString(), precipitation: 1.4, min_temp: 37, max_temp: 46 },
    { date: new Date('2021-12-23').toISOString(), precipitation: 1.4, min_temp: 26, max_temp: 37 },
    { date: new Date('2021-12-24').toISOString(), precipitation: 0.3, min_temp: 35, max_temp: 44 },
    { date: new Date('2021-12-25').toISOString(), precipitation: 1.2, min_temp: 28, max_temp: 33 },
    { date: new Date('2021-12-26').toISOString(), precipitation: 0.7, min_temp: 27, max_temp: 37 },
    { date: new Date('2021-12-27').toISOString(), precipitation: 1.2, min_temp: 30, max_temp: 39 },
    { date: new Date('2021-12-28').toISOString(), precipitation: 0.4, min_temp: 25, max_temp: 34 },
    { date: new Date('2021-12-29').toISOString(), precipitation: 1.2, min_temp: 29, max_temp: 39 },
    { date: new Date('2021-12-30').toISOString(), precipitation: 1, min_temp: 35, max_temp: 40 },
    { date: new Date('2021-12-31').toISOString(), precipitation: 0.5, min_temp: 30, max_temp: 37 },
    { date: new Date('2022-01-01').toISOString(), precipitation: 1.6, min_temp: 31, max_temp: 36 },
    { date: new Date('2022-01-02').toISOString(), precipitation: 0.2, min_temp: 26, max_temp: 37 },
    { date: new Date('2022-01-03').toISOString(), precipitation: 0, min_temp: 27, max_temp: 32 },
    { date: new Date('2022-01-04').toISOString(), precipitation: 1.7, min_temp: 36, max_temp: 46 },
    { date: new Date('2022-01-05').toISOString(), precipitation: 0.4, min_temp: 29, max_temp: 34 },
    { date: new Date('2022-01-06').toISOString(), precipitation: 0, min_temp: 29, max_temp: 41 },
    { date: new Date('2022-01-07').toISOString(), precipitation: 0, min_temp: 25, max_temp: 30 },
    { date: new Date('2022-01-08').toISOString(), precipitation: 0, min_temp: 29, max_temp: 39 },
    { date: new Date('2022-01-09').toISOString(), precipitation: 0, min_temp: 36, max_temp: 48 },
    { date: new Date('2022-01-10').toISOString(), precipitation: 0, min_temp: 31, max_temp: 37 },
    { date: new Date('2022-01-11').toISOString(), precipitation: 0.9, min_temp: 28, max_temp: 36 },
    { date: new Date('2022-01-12').toISOString(), precipitation: 1.8, min_temp: 37, max_temp: 42 },
    { date: new Date('2022-01-13').toISOString(), precipitation: 0.8, min_temp: 28, max_temp: 40 },
    { date: new Date('2022-01-14').toISOString(), precipitation: 1.5, min_temp: 34, max_temp: 39 },
    { date: new Date('2022-01-15').toISOString(), precipitation: 1.2, min_temp: 26, max_temp: 33 },
    { date: new Date('2022-01-16').toISOString(), precipitation: 1, min_temp: 34, max_temp: 46 },
    { date: new Date('2022-01-17').toISOString(), precipitation: 0.7, min_temp: 37, max_temp: 46 },
    { date: new Date('2022-01-18').toISOString(), precipitation: 0.7, min_temp: 29, max_temp: 35 },
    { date: new Date('2022-01-19').toISOString(), precipitation: 0.2, min_temp: 26, max_temp: 37 },
    { date: new Date('2022-01-20').toISOString(), precipitation: 1.6, min_temp: 34, max_temp: 39 },
    { date: new Date('2022-01-21').toISOString(), precipitation: 0.9, min_temp: 25, max_temp: 34 },
    { date: new Date('2022-01-22').toISOString(), precipitation: 0.5, min_temp: 31, max_temp: 43 },
    { date: new Date('2022-01-23').toISOString(), precipitation: 1.7, min_temp: 25, max_temp: 34 },
    { date: new Date('2022-01-24').toISOString(), precipitation: 0.3, min_temp: 37, max_temp: 44 },
    { date: new Date('2022-01-25').toISOString(), precipitation: 0.4, min_temp: 29, max_temp: 39 },
    { date: new Date('2022-01-26').toISOString(), precipitation: 0.6, min_temp: 28, max_temp: 40 },
    { date: new Date('2022-01-27').toISOString(), precipitation: 0.6, min_temp: 27, max_temp: 35 },
    { date: new Date('2022-01-28').toISOString(), precipitation: 0.8, min_temp: 28, max_temp: 38 },
    { date: new Date('2022-01-29').toISOString(), precipitation: 0.3, min_temp: 37, max_temp: 47 },
    { date: new Date('2022-01-30').toISOString(), precipitation: 1.1, min_temp: 25, max_temp: 36 },
    { date: new Date('2022-01-31').toISOString(), precipitation: 1.4, min_temp: 28, max_temp: 35 },
    { date: new Date('2022-02-01').toISOString(), precipitation: 1.9, min_temp: 28, max_temp: 40 },
    { date: new Date('2022-02-02').toISOString(), precipitation: 0.4, min_temp: 33, max_temp: 40 },
    { date: new Date('2022-02-03').toISOString(), precipitation: 1.9, min_temp: 36, max_temp: 42 },
    { date: new Date('2022-02-04').toISOString(), precipitation: 0.6, min_temp: 33, max_temp: 40 },
    { date: new Date('2022-02-05').toISOString(), precipitation: 1, min_temp: 26, max_temp: 36 },
    { date: new Date('2022-02-06').toISOString(), precipitation: 1.6, min_temp: 28, max_temp: 37 },
    { date: new Date('2022-02-07').toISOString(), precipitation: 1, min_temp: 30, max_temp: 37 },
    { date: new Date('2022-02-08').toISOString(), precipitation: 1.1, min_temp: 36, max_temp: 47 },
    { date: new Date('2022-02-09').toISOString(), precipitation: 0, min_temp: 37, max_temp: 45 },
    { date: new Date('2022-02-10').toISOString(), precipitation: 0, min_temp: 33, max_temp: 45 },
    { date: new Date('2022-02-11').toISOString(), precipitation: 0, min_temp: 37, max_temp: 44 },
    { date: new Date('2022-02-12').toISOString(), precipitation: 1, min_temp: 32, max_temp: 39 },
    { date: new Date('2022-02-13').toISOString(), precipitation: 1.3, min_temp: 36, max_temp: 46 },
    { date: new Date('2022-02-14').toISOString(), precipitation: 1.6, min_temp: 33, max_temp: 49 },
    { date: new Date('2022-02-15').toISOString(), precipitation: 1.8, min_temp: 32, max_temp: 42 },
    { date: new Date('2022-02-16').toISOString(), precipitation: 0.1, min_temp: 31, max_temp: 40 },
    { date: new Date('2022-02-17').toISOString(), precipitation: 1, min_temp: 36, max_temp: 45 },
    { date: new Date('2022-02-18').toISOString(), precipitation: 0.9, min_temp: 35, max_temp: 45 },
    { date: new Date('2022-02-19').toISOString(), precipitation: 2, min_temp: 35, max_temp: 44 },
    { date: new Date('2022-02-20').toISOString(), precipitation: 1.7, min_temp: 32, max_temp: 41 },
    { date: new Date('2022-02-21').toISOString(), precipitation: 1.1, min_temp: 26, max_temp: 41 },
    { date: new Date('2022-02-22').toISOString(), precipitation: 1, min_temp: 32, max_temp: 43 },
    { date: new Date('2022-02-23').toISOString(), precipitation: 0.7, min_temp: 29, max_temp: 44 },
    { date: new Date('2022-02-24').toISOString(), precipitation: 1.5, min_temp: 29, max_temp: 41 },
    { date: new Date('2022-02-25').toISOString(), precipitation: 0, min_temp: 33, max_temp: 43 },
    { date: new Date('2022-02-26').toISOString(), precipitation: 0, min_temp: 37, max_temp: 50 },
    { date: new Date('2022-02-27').toISOString(), precipitation: 1.9, min_temp: 33, max_temp: 45 },
    { date: new Date('2022-02-28').toISOString(), precipitation: 1.5, min_temp: 25, max_temp: 41 },
  ];

  useEffect(() => {
    const seed = async () => {
      try {
        //libraries.forEach(async (item) => await addDoc(librariesCollection, item));
        // branches.forEach(async (item) => await addDoc(branchesCollection, item));
        // weather.forEach(async (item) => await addDoc(weatherCollection, item));
      } catch (error) {
        console.log('addDoc error: ', (error as Error).message);
      }
    };

    seed();
  }, []);

  return (
    <View>
      <Text>Seeding database</Text>
    </View>
  );
}
